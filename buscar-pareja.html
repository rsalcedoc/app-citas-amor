<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Buscar Pareja - Amor Sin Fronteras</title>
  <link rel="stylesheet" href="styles/buscar-pareja.css" />
</head>
<script type="module">
  import { createClient } from 'https://cdn.jsdelivr.net/npm/@supabase/supabase-js/+esm';
  const supabase = createClient(
  'https://ihpfwakcpvrwsmkbtwnt.supabase.co',
  'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFz...'
);


   async function cargarUsuarios() {
    const { data: sessionData } = await supabase.auth.getSession();
    const currentUser = sessionData?.session?.user;

    const { data: usuarios, error } = await supabase
      .from('profiles') // o 'Users' si usas ese nombre
      .select('*')
      .neq('id', currentUser?.id);

    const container = document.getElementById('usuariosContainer');
    container.innerHTML = '';

    if (error || !usuarios) {
      container.innerHTML = '<p style="text-align:center;">No se pudieron cargar usuarios ğŸ˜¢</p>';
      return;
    }

    if (usuarios.length === 0) {
      container.innerHTML = '<p style="text-align:center;">No hay usuarios registrados aÃºn ğŸ’”</p>';
      return;
    }

    usuarios.forEach(user => {
      const tarjeta = document.createElement('article');
      tarjeta.classList.add('tarjeta');
      tarjeta.innerHTML = `
        <img src="${user.avatar_url || 'https://randomuser.me/api/portraits/lego/1.jpg'}" alt="Perfil" />
        <h3>${user.username || 'Usuario AnÃ³nimo'}, ${user.age || '--'}</h3>
        <p>ğŸ“ ${user.location || 'UbicaciÃ³n desconocida'}</p>
        <p>ğŸ’¬ ${user.bio || 'Sin descripciÃ³n aÃºn'}</p>
        <button onclick="alert('Â¡FunciÃ³n para enviar mensaje prÃ³ximamente!')">Enviar mensaje ğŸ’Œ</button>
      `;
      container.appendChild(tarjeta);
    });
  }

  cargarUsuarios();
</script>

<body>
  <header>
    <h1>ğŸ’˜ Encuentra a tu Persona Especial ğŸ’˜</h1>
    <a href="home.html" class="volver">â† Volver al Inicio</a>
  </header>

  <section class="filtros">
    <h2>Filtrar</h2>
    <form>
      <input type="text" placeholder="PaÃ­s o ciudad..." />
      <input type="number" placeholder="Edad mÃ­nima" min="18" />
      <input type="number" placeholder="Edad mÃ¡xima" min="18" />
      <select>
        <option value="">Intereses</option>
        <option>Lectura</option>
        <option>Videojuegos</option>
        <option>Deportes</option>
        <option>MÃºsica</option>
        <option>PelÃ­culas</option>
      </select>
      <button type="submit">Buscar ğŸ’˜</button>
    </form>
  </section>

  <main class="resultados" id="usuariosContainer">
    <article class="tarjeta">
      <img src="https://randomuser.me/api/portraits/women/68.jpg" alt="Perfil" />
      <h3>Camila, 24</h3>
      <p>ğŸ“ MedellÃ­n, Colombia</p>
      <p>ğŸµ Amante de la mÃºsica y la poesÃ­a</p>
      <button>Enviar mensaje ğŸ’Œ</button>
    </article>

    <article class="tarjeta">
      <img src="https://randomuser.me/api/portraits/men/45.jpg" alt="Perfil" />
      <h3>Lucas, 27</h3>
      <p>ğŸ“ Buenos Aires, Argentina</p>
      <p>ğŸ® Gamer y fan de pelÃ­culas romÃ¡nticas</p>
      <button>Enviar mensaje ğŸ’Œ</button>
    </article>

    <!-- Puedes copiar mÃ¡s tarjetas como estas -->
  </main>

  <footer>
    <p>&copy; 2025 Amor Sin Fronteras. Todos los derechos reservados ğŸ’–</p>
  </footer>
</body>
</html>
